<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>ESIR x EESAB</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="./ihm/style.css">
    <link rel="stylesheet" href="./ihm/slides.css">

    <!-- Javascript -->

    <script src="http://localhost:8098"></script>

    <script type="text/javascript" src="./libs/socket.io.slim.js" charset="utf-8"></script>

    <script type="text/javascript" src="./libs/vue.js" charset="utf-8"></script>

    <script type="text/javascript" src="./libs/svg.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="./libs/svg.draggable.min.js" charset="utf-8"></script>

    <script type="text/javascript" src="./libs/caress-0.1.0.min.js"></script>

    <script type="text/javascript" src="./libs/alloy_finger.js"></script>
    <script type="text/javascript" src="./libs/alloy_finger.vue.js"></script>

    <script type="text/javascript" src="./ihm/vue-draggable.js" charset="utf-8"></script>
    <script type="text/javascript" src="./ihm/vue-simple-gesture.js" charset="utf-8"></script>
    <script type="text/javascript" src="./ihm/vue-slides.js" charset="utf-8"></script>

    <script type="text/javascript" src="./libs/openseadragon/openseadragon.js" charset="utf-8"></script>


  </head>
  <body>
    <div id="rotationWrap">
      <div  id="splash" :active="active">
        <div>
          <p>{{wait}}</p>
        </div>
      </div>

      <div  id="dialogue"
            class="full-border"
            :active="active"
            v-draggable="{containment:'parent'}">
        <div>
          <input  autofocus="true"
                  id="name"
                  class="full-border"
                  v-model="name"
                  type="text"
                  placeholder="Un ptit nom s'il vous plaît ? (:">
        </div>
        <div>
          <button   class="full-border two-button"
                    type="submit"
                    v-on:click="onOkPressed"
                    v-finger:tap="onOkPressed">
                    Créer
          </button>
          <button   class="full-border two-button"
                    type="submit"
                    v-on:click="onCancelPressed"
                    v-finger:tap="onCancelPressed">
                    Annuler
          </button>
        </div>

      </div>

      <div id="rotationButtons">
        <div  class="rotationButton"
              id="rotationButtonTopLeft"
              v-on:click="onRotatePressed"
              v-finger:tap="onRotatePressed">

        </div>
        <div  class="rotationButton"
              id="rotationButtonTopRight"
              v-on:click="onRotatePressed"
              v-finger:tap="onRotatePressed">

        </div>
        <div  class="rotationButton"
              id="rotationButtonBottomLeft"
              v-on:click="onRotatePressed"
              v-finger:tap="onRotatePressed">

        </div>
        <div  class="rotationButton"
              id="rotationButtonBottomRight"
              v-on:click="onRotatePressed"
              v-finger:tap="onRotatePressed">

        </div>
      </div>

      <div  id="keyboard"
            :active="active"
            v-draggable="{containment:'parent'}">
        <template v-for="key in keys">
          <div class="key" v-bind:id="key.label" v-on:click="onKeyPressed" v-finger:tap="onKeyPressed">
            <div>
              <p>{{key.letter}}</p>
            </div>

          </div>
        </template>
      </div>

      <div id="mainStrip">
        <div id="buttons">
          <div id="buttons_top">
            <div  id="activate_voice"
                  class="button"
                  v-on:click="onEnableVocalPressed"
                  v-finger:tap="onEnableVocalPressed"></div>
            <div  id="voice_filters_info">
              <span>Filtre actif &mdash;</span>
              <span>{{filtre_actif}}</span>
            </div>
          </div>
          <div  id="buttons_bottom">
            <div  id="title">ACCESS TO TOOLS</div>
            <div  id="add_montage"
                  class="button"
                  v-on:click="onNewMontagePressed"
                  v-finger:tap="onNewMontagePressed"></div>
            <div  id="add_post-it"
                  class="button"
                  v-on:click="onAddPostIt"
                  v-finger:tap="onAddPostIt"></div>
            <div  id="export_montage"
                  class="button"
                  v-on:click="onExportMontagePressed"
                  v-finger:tap="onExportMontagePressed"></div>

          </div>
        </div>
      </div>

      <div  id="zoom"
            class="full-space"
            v-finger:tap="tap"
            v-finger:touch-start="start"
            v-finger:touch-end="end"
            v-finger:touch-cancel="end"
            v-finger:press-move="move"
            v-finger:rotate="rotate"
            v-finger:long-tap="longTap"
            v-on:mousedown.left="start"
            :active="active">
        <div  id="marker1"
              class="marker"
              v-draggable="{containment:'parent'}">
        </div>
        <div  id="marker2"
              class="marker"
              v-draggable="{containment:'parent'}">
        </div>
      </div>

      <div id="montageStrip">
        <template v-for="montage in montages">
          <div class="montage-label-container">
            <div class="vertical-label-container">
              <label>{{montage.name}}</label>
            </div>
          </div>
        </template>
      </div>

      <div class="global_container">

        <div  id="montageShutter"
              class="space"
              v-on:wheel="wheelOnMontages"
              v-finger:touch-start="startOnMontages"
              v-finger:touch-end="endOnMontages"
              v-finger:touch-cancel="endOnMontages"
              v-finger:press-move="moveOnMontages"
              v-on:mousedown.left="startOnMontages"
              v-on:mouseup.left="endOnMontages"
              v-on:mousemove.left="moveOnMontages"
              v-finger:rotate="rotateOnImage">
          <template v-for="montage in montages">
            <div class="workspace" v-bind:id="montage.name">
            </div>
          </template>
        </div>

        <div  id="libraryStrip"
              v-draggable="{axis:'x',containment:'parent',drag:move}">
              <template v-for="book in books">
                <div class="label-container">
                  <div class="centered-label">
                    <label>{{book.name}}</label>
                  </div>
                </div>
              </template>
              <div class="label-container">
                <div class="centered-label">
                  <label>bonus</label>
                </div>
              </div>
        </div>

        <div  id="libraryShutter"
              class="space">

          <slides v-bind:conf="{id:'library'}">
            <template v-for="book in books">
              <slide v-bind:wrap="{}">
                <slides v-bind:conf="{id:book.name,horizontal:true}">
                  <template v-for="page in book.pages">
                    <slide v-bind:wrap="{data:page,methods:{}}">
                      <img v-bind:src="page.thumbnail" draggable="false">
                    </slide>
                  </template>
                </slides>
                <label class="book_label">
                  <span class="book_name">{{book.name}}</span>
                  <span class="page_ref">{{book.pages[active[book.name]].description}}</span>
                </label>
              <slide>
            </template>
            <!--<slide v-bind:wrap="{}">
              <slides v-bind:conf="{id:bonus}">
                <template v-for="page in bonus">
                  <slide v-bind:wrap="{data:page,methods:{}}">
                    <img v-bind:src="page.thumbnail" draggable="false">
                  </slide>
                </template>
              </slides>
              <label class="book_label">
                <span class="book_name">Bonus</span>
                <span class="page_ref">{{bonus.pages[active['bonus']].description}}</span>
              </label>
            <slide>-->
          </slides>


          <!--<template v-for="book in books">
            <div class="book">
              <div class="book_container"
                v-bind:id="book.name"
                v-bind:numberPages="book.pages.length">
                <template v-for="page in book.pages">
                  <img  class="book_page"
                        v-bind:src="page.thumbnail"
                        v-bind:originalPath="page.originalPath"
                        v-bind:originalWidth="page.originalWidth"
                        v-bind:originalHeight="page.originalHeight"
                        v-bind:thumbnail="page.thumbnail"
                        v-bind:dzi="page.dzi"
                        v-bind:id="page.id"
                        v-bind:alt="page.description"
                        v-finger:long-tap="longTap"
                        v-on:dblclick="zoom"
                        v-finger:tap="tap">
                </template>
              </div>
              <label class="book_label">
                <span class="book_name">{{book.name}}</span>
                <span class="page_ref">{{book.pages[active[book.name]].description}}</span>
              </label>
            </div>
          </template>

          <div  id="bonus"
                class="library"
                v-on:wheel="wheelOnBook"
                v-finger:touch-start="startOnBook"
                v-finger:touch-end="endOnBook"
                v-finger:touch-cancel="endOnBook"
                v-finger:press-move="moveOnBook"
                v-on:mousedown.left="startOnBook"
                v-on:mouseup.left="endOnBook"
                v-on:mousemove.left="moveOnBook"
                v-bind:numberPages="bonus.length">
                <div class="library_container">
                  <template v-for="page in bonus">
                    <div  class="library_page"
                          v-bind:style="{ 'background-image': 'url(' + page.thumbnail + ')' }"
                          originalPath="page.originalPath"
                          originalWidth="page.originalWidth"
                          originalHeight="page.originalHeight"
                          thumbnail="page.thumbnail"
                          dzi="page.dzi"
                          v-bind:id="page.id"
                          v-bind:alt="page.description"
                          v-finger:long-tap="longTap"
                          :active="(bonus[active['bonus']].id == page.id)? true : false">
                    </div>
                  </template>
                </div>
                <label class="library_label">
                  <span class="book_name">Bonus</span>
                  <span class="page_ref">{{bonus.pages[active['bonus']].description}}</span>
                </label>
          </div>-->
        </div>
      </div>

    </div>

    <div id="montageIO">

    </div>


    <script type="text/javascript" src="./ihm/app.js" charset="utf-8"></script>
    <script type="text/javascript" src="./ihm/splash.js" charset="utf-8"></script>
    <script type="text/javascript" src="./ihm/keyboard.js" charset="utf-8"></script>
    <script type="text/javascript" src="./ihm/rotationButtons.js" charset="utf-8"></script>
    <script type="text/javascript" src="./ihm/dialogue.js" charset="utf-8"></script>
    <script type="text/javascript" src="./ihm/mainStrip.js" charset="utf-8"></script>
    <script type="text/javascript" src="./ihm/montageStrip.js" charset="utf-8"></script>
    <script type="text/javascript" src="./ihm/libraryStrip.js" charset="utf-8"></script>
    <script type="text/javascript" src="./ihm/montageShutter.js" charset="utf-8"></script>
    <script type="text/javascript" src="./ihm/libraryShutter.js" charset="utf-8"></script>
    <script type="text/javascript" src="./ihm/zoom.js" charset="utf-8"></script>
  </body>
</html>
